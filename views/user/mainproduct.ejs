
<%- include('nav',{ user: user,cartItemCount: cartItemCount }) -%>
<style>
body {
  overflow-x: hidden;
  background-color: #ffffff;
}
img {
  max-width: 100%;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
 }
.preview {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column;
          height: 700px;
        }
  @media screen and (max-width: 996px) {
    .preview {
      margin-bottom: 20px; } }
.preview-pic {
  -webkit-box-flex: 1;
  -webkit-flex-grow: 1;
      -ms-flex-positive: 1;
          flex-grow: 1; }
.preview-thumbnail.nav-tabs {
  border: none;
  margin-top: 15px;
 }
  .preview-thumbnail.nav-tabs li {
    width: 18%;
    margin-right: 2.5%; }
    .preview-thumbnail.nav-tabs li img {
      max-width: 100%;
      display: block;
      border-radius: 8px;
     }
    .preview-thumbnail.nav-tabs li a {
      padding: 0;
      margin: 0; }
    .preview-thumbnail.nav-tabs li:last-of-type {
      margin-right: 0; }
.tab-content {
  overflow: hidden; }
  .tab-content img {
    width: 100%;
    height: 100%;
        }
.card {
  margin-top: -30px;
  height: 75vh;
  background: #fff;
  padding: 3em;
  line-height: 3em; }
@media screen and (min-width: 997px) {
  .wrapper {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex; } }
.details {
  padding-top: 100px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
      -ms-flex-direction: column;
          flex-direction: column; }
.colors {
  -webkit-box-flex: 1;
  -webkit-flex-grow: 1;
      -ms-flex-positive: 1;
          flex-grow: 1; }
.product-title, .price, .sizes, .colors {
  font-weight: bold; }
.checked, .price span {
  color: #ff9f1a; }
.product-title, .rating, .product-description, .price, .vote, .sizes {
  margin-bottom: 15px; }
  .cat{
    color: #575757;
  }
  .product-description{
    line-height: 1.5em;
    font-family: "Amazon Ember";
  }
.product-title {
  margin-top: 0; }
.size {
  margin-right: 10px; }
  .size:first-of-type {
    margin-left: 40px; }
.color {
  display: inline-block;
  vertical-align: middle;
  margin-right: 10px;
  height: 2em;
  width: 2em;
  border-radius: 2px; }
  .color:first-of-type {
    margin-left: 20px; }
.add-to-cart, .like {
  background: #004C3F;
  width: 190px;
  height: 42px;
  border: none;
  text-transform: UPPERCASE;
  font-weight: bold;
  color: #fff;
  -webkit-transition: background .3s ease;
          transition: background .3s ease; }
  .add-to-cart:hover, .like:hover {
    background: #004C3F;
    color: #fff; }
.not-available {
  text-align: center;
  line-height: 2em; }
  .not-available:before {
    font-family: fontawesome;
    content: "\f00d";
    color: #fff; }
.orange {
  background: #ff9f1a; }
.green {
  background: #85ad00; }
.blue {
  background: #0076ad; }
.tooltip-inner {
  padding: 1.3em; }
@-webkit-keyframes opacity {
  0% {
    opacity: 0;
    -webkit-transform: scale(3);
            transform: scale(3); }
  100% {
    opacity: 1;
    -webkit-transform: scale(1);
            transform: scale(1); } }
@keyframes opacity {
  0% {
    opacity: 0;
    -webkit-transform: scale(3);
            transform: scale(3); }
  100% {
    opacity: 1;
    -webkit-transform: scale(1);
            transform: scale(1); } }
#pic-1 img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
.preview-pic {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
 .preview-thumbnail img {
    width: 100px; 
    height: 100px;
    object-fit: cover; 
  }
  .tab-content img {
    width: 100%;   
  }
  .preview-pic{
    width: 100%;
    height: 100%;
  }
  .preview-thumbnail img,
.tab-content img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
}
.preview-pic img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
}
#pic-1 img {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
}
.tab-pane.active img {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
.quantity input {
    width: 50px;
    padding: 5px;
    height: 30px; 
}
.preview-thumbnail.nav-tabs {
  display: flex; /* Use flexbox */
  flex-wrap: nowrap; /* Prevent wrapping */
  overflow-x: auto; /* Enable horizontal scrolling */
  border: none;
  margin-top: 15px;
}
.preview-thumbnail.nav-tabs li {
  flex: 0 0 auto; /* Let items shrink if needed */
  width: 18%; /* Set width for each item */
  margin-right: 2.5%; /* Add some space between items */
}
.preview-thumbnail.nav-tabs li img {
  max-width: 100%;
  display: block;
  border-radius: 8px;
}
 .preview-thumbnail.nav-tabs {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    border: none;
    margin-top: 15px;
    padding-bottom: 10px; /* Adjust as needed */
    margin-bottom: 10px; /* Adjust as needed */
  }
  .preview-thumbnail.nav-tabs::-webkit-scrollbar {
    display: none; /* Hide default scrollbar */
  }
  .preview-thumbnail.nav-tabs li {
    flex: 0 0 auto;
    width: 18%;
    margin-right: 2.5%;
  }
  .preview-thumbnail.nav-tabs li img {
    max-width: 100%;
    display: block;
    border-radius: 8px;
  }
  .preview {
    width: 450px;
    height: 450px;
  }
  .outofstock{
    width: 240px;
    height: 50px;
    background-color: #004C3F;
    margin: 20px;
    color: #fff;
    font-size: 25px;
  }
  .btn-container {
  text-align: center;
}
.price{
  color: #ff9f1a;
  font-weight: 400;
}
.offer{
  font-size: 20px;
  margin-top: 6px;
  color: #ff9f1a;
}
    </style>
    <div class="container">
      <div class="card">
        <div class="container-fliud">
          <div class="wrapper row">
            <div class="preview col-md-6">
              <div class="preview-pic tab-content">
                <% for (var i = 0; i < Math.min(product.images.length, 45); i++) { %>
                <div class="tab-pane <%= i === 0 ? 'active' : '' %>" id="pic-<%= i + 1 %>">
<img 
          class="img-fluid" 
          id="zoom_<%= i + 1 %>" 
          src="<%= product.images[i] %>" 
          data-zoom-image="<%= product.images[i] %>"
          style="width: 100%; height: auto; max-height: 500px; object-fit: contain;"
          alt="<%= product.name %>"
        />                </div>
                <% } %>
              </div>
              <ul class="preview-thumbnail nav nav-tabs">
                <% for (var i = 0; i < Math.min(product.images.length, 45); i++) { %>
                <li class="<%= i === 0 ? 'active' : '' %>">
                  <a data-target="#pic-<%= i + 1 %>" data-toggle="tab">
<img 
            src="<%= product.images[i] %>" 
            style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px;"
            alt="Thumb <%= i + 1 %>"
          />                  </a>
                </li>
                <% } %>
              </ul>
            </div>
            <div class="details col-md-6">
              <% if (product) { %>
              <h3 class="product-title"><%= product.name %></h3>
              <h5 class="cat"><%= product.category.name %></h5>
              <p class="product-description"><%= product.description %></p>
              <div class="d-flex">
             
                <% if (productOffers && productOffers.length > 0) { %>
                  <% productOffers.forEach(offer => { %>
                      <h3 >₹<%=  product.price- ((offer.discountPercentage/100) * product.price).toFixed(0)%></h3> &nbsp;&nbsp;&nbsp;
                      <h3 class="price" style="color: #ff9f1a;font-size: 24px; margin-top: 3px;" ><del><%= product.price.toFixed(0)%></del></h3> &nbsp;&nbsp;&nbsp;
                      <h3 class="offer"><%=offer.discountPercentage%>% Offer</h3>
                  <% }); %>
              <% } else { %>
                  <h4 class="price">Price: <span>₹&nbsp;<%= product.price %>/-</span></h4><br>
              <% } %>
              </div>
              <div class="action btn-container d-flex ">
                <% if (product.quantity > 0) { %>
                  <a href="/user/addtocart/<%= product._id %>" class="add-to-cart btn btn-default " role="button">Add to Cart</a> &nbsp;&nbsp;&nbsp;
                  <a href="#" class="like btn btn-default" role="button">WISHLIST &nbsp;  <i class="fa-solid fa-heart"></i></a>
                <% } else { %>
                  <p class="not-available outofstock">Out of Stock</p>
                <% } %>
              </div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br><br><br>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/69093/jquery.elevateZoom-3.0.8.min.js"></script>
         <script>
            $("#zoom_01").elevateZoom();
         </script>
        <script>
  $(document).ready(function() {
    $('.preview-thumbnail a').on('click', function(e) {
      e.preventDefault();
      $('.preview-thumbnail li').removeClass('active');
      $(this).parent().addClass('active');
      var targetImageId = $(this).attr('data-target');
      $('.tab-pane').removeClass('active');
      $(targetImageId).addClass('active');
    });
  });
</script>
<script>
  $(document).ready(function() {
  $("#zoom_01").elevateZoom();
  $('.preview-thumbnail a').on('click', function(e) {
    e.preventDefault();
    $('.preview-thumbnail li').removeClass('active');
    $(this).parent().addClass('active');
    var targetImageId = $(this).attr('data-target');
    $('.tab-pane').removeClass('active');
    $(targetImageId).addClass('active');
    $(targetImageId + ' img').elevateZoom();
  });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>